---
description: 'Update : 2025.08.07'
---

# 7. EKS 활용 사례 1 (조회)

## 1. EKS 조회

* 클러스터 목록 조회 프롬프트:

```
보유하고 있는 EKS 클러스터는 몇 개인가요?
Markdown 테이블 형식으로 출력해 주세요.
```

* 출력결과 예시:

```
현재 보유하고 있는 EKS 클러스터 정보를 마크다운 테이블 형식으로 정리하여 ~/output/eks_cluster_inventory.md 파일에 저장했습니다.

## 요약

총 1개의 EKS 클러스터를 보유하고 있습니다:

| 클러스터명 | 상태 | 버전 | 노드 그룹 수 | 총 노드 수 | 인스턴스 타입 | 구매 옵션 |
|-----------|------|------|-------------|-----------|--------------|-----------|
| eksworkshop | ACTIVE | 1.31 | 2개 | 6개 | m6i.xlarge | ON_DEMAND |

### 주요 특징:
• **리전**: ap-northeast-2 (서울)
• **노드 그룹**: 
  • managed-ng-private-01 (백엔드용, 3노드)
  • managed-ng-public-01 (프론트엔드용, 3노드)
• **예상 월 비용**: 약 $432 USD (노드만)
• **보안**: Secrets 암호화, 모든 로그 활성화
• **네트워킹**: 6개 서브넷 (Public 3개, Private 3개)

### 비용 최적화 권장사항:
1. Spot 인스턴스 활용 검토 (현재 모든 노드가 ON_DEMAND)
2. Right Sizing - 워크로드에 맞는 인스턴스 타입 검토
3. Auto Scaling 최적화 - 최소 노드 수 조정 검토

상세한 정보는 생성된 마크다운 파일에서 확인하실 수 있습니다.
```

[Markdown 결과 예시](https://whchoi98.notion.site/eks_cluster_inventory-24704ef7e60e8086b312ceea8d603785?source=copy_link)



* 클러스터 요약 정보 프롬프트:

```
클러스터의 기본 정보를 테이블로 생성해 주세요.
```

* 출력 결과 예시:

```

EKS 클러스터의 기본 정보를 체계적으로 정리한 테이블을 ~/output/eks_cluster_basic_info.md 파일에 생성했습니다.

## 주요 테이블 구성:

### 1. 클러스터 기본 정보
• 이름, 상태, 리전, 버전 등 핵심 정보

### 2. 네트워킹 정보 
• VPC, 서브넷, 엔드포인트, 액세스 설정

### 3. 보안 설정
• 보안 그룹, 암호화, 인증 모드, OIDC

### 4. 로깅 설정
• 모든 로그 유형별 활성화 상태

### 5. 노드 그룹 요약
• 2개 노드 그룹의 기본 정보

### 6. 비용 정보
• 시간당/일일/월별 예상 비용

### 7. 태그 정보
• 클러스터에 적용된 주요 태그들

이 테이블을 통해 eksworkshop 클러스터의 전체적인 구성과 설정을 한눈에 파악할 수 있습니다. 특히 비용 최적화 관점에서 현재 모든 노드가 ON_DEMAND로 설정되어 있어 Spot 인스턴스 활용을 검토할 수 있는 여지가 있음을 확인할 수 있습니다.
 

```

[Markdown 결과 예시](https://www.notion.so/whchoi98/eks_cluster_basic_info-24704ef7e60e80d5a92dedb0a9437b0b?source=copy_link)



* &#x20;IAM 접근 엔트리 조회 프롬프트:

```
EKS API Config를 사용해서 IAM 접근 권한 항목을 보기 좋게 테이블로 출력해 주세요.
```

* 출력결과 예시:

```
 EKS 클러스터의 IAM 접근 권한 정보를 체계적으로 정리한 테이블을 ~/output/eks_iam_access_permissions.md 파일에 생성했습니다.

## 주요 내용 요약:

### **총 6개의 액세스 엔트리**가 설정되어 있습니다:

| 역할 유형 | 개수 | 주요 권한 |
|----------|------|----------|
| AWS 서비스 역할 | 1개 | 클러스터 인사이트 |
| 관리 역할 | 1개 | 클러스터 전체 관리자 |
| 매니지드 노드 그룹 역할 | 2개 | 노드 관리 |
| 언매니지드 노드 그룹 역할 | 2개 | 노드 관리 |

### **핵심 발견사항:**

1. 적절한 권한 분리: 
   • 노드 역할들은 system:nodes 그룹에만 속함
   • AWS 서비스 역할은 인사이트 정책만 보유

2. 관리자 권한: 
   • mgmtvpc-SSMRole이 AmazonEKSClusterAdminPolicy로 전체 클러스터 관리 권한 보유

3. 노드 그룹 구성:
   • 매니지드 노드 그룹 2개 (public/private)
   • 언매니지드 노드 그룹 2개 (public/private)

### **보안 권장사항:**
• ✅ 최소 권한 원칙이 대체로 잘 적용됨
• ⚠️ SSM 역할의 관리자 권한 사용 모니터링 필요
• 📊 CloudTrail을 통한 API 호출 모니터링 권장

이 테이블을 통해 EKS 클러스터의 IAM 접근 권한 구조를 명확히 파악하고 보안 관리에 활용할 수 있습니다.

 
```

[Markdown 결과 예시](https://www.notion.so/whchoi98/eks_iam_access_permissions-24704ef7e60e80358c33f9dc45f2f54f?source=copy_link)



* EKS 애드온 정보 프롬프트:

```
현재 클러스터에 설치된 EKS 애드온 정보를 테이블로 보여 주세요.
```

* 출력 결과 예시:

```
> 현재 EKS 클러스터에 설치된 애드온 정보를 체계적으로 정리한 테이블을 ~/output/eks_addons_info.md 파일에 생성했습니다.

## 주요 내용 요약:

### **총 5개의 애드온**이 설치되어 있습니다:

| 애드온 | 상태 | 버전 | 주요 기능 |
|--------|------|------|----------|
| aws-ebs-csi-driver | ACTIVE | v1.46.0-eksbuild.1 | EBS 스토리지 |
| coredns | ACTIVE | v1.11.4-eksbuild.14 | DNS 서비스 |
| kube-proxy | ACTIVE | v1.31.10-eksbuild.2 | 네트워크 프록시 |
| metrics-server | ACTIVE | v0.8.0-eksbuild.1 | 메트릭 수집 |
| vpc-cni | ACTIVE | v1.19.0-eksbuild.1 | VPC 네트워킹 |

### **카테고리별 분류:**

1. 네트워킹 (3개): vpc-cni, kube-proxy, coredns
2. 스토리지 (1개): aws-ebs-csi-driver  
3. 모니터링 (1개): metrics-server

### **IAM 역할 정보:**
• **aws-ebs-csi-driver**: EBS 볼륨 관리 권한
• **vpc-cni**: ENI 생성/관리 권한
• 나머지 3개: 기본 서비스 계정 사용

### **상태 요약:**
• ✅ 모든 애드온이 ACTIVE 상태
• ✅ 건강 상태 이슈 없음
• ✅ 최신 안정 버전으로 설치됨

### **권장사항:**
1. 정기적인 버전 업데이트 계획 수립
2. 추가 애드온 고려: AWS Load Balancer Controller, Cluster Autoscaler 등
3. 모니터링 설정: 애드온 상태 및 성능 모니터링
4. 보안 검토: IAM 역할의 최소 권한 원칙 적용 확인

이 정보를 통해 클러스터의 애드온 구성 상태를 파악하고 필요한 추가 애드온 설치나 관리 계획을 수립할 수 있습니다.                                                     
                                                                                  
  
```

[Markdown 결과 예시](https://www.notion.so/whchoi98/eks_addons_info-24704ef7e60e80e6b915ca3259e78e0d?source=copy_link)



* #### 워커 노드 인스턴스 타입 확인 프롬프트:

```
내 클러스터의 워커 노드 인스턴스 타입은 무엇인가요?
```

* 출력결과 예시

```
귀하의 EKS 클러스터 eksworkshop의 모든 워커 노드는 m6i.xlarge 인스턴스 타입을 사용하고 있습니다.

### 📊 요약 정보:

| 항목 | 값 |
|------|-----|
| 인스턴스 타입 | m6i.xlarge |
| 총 노드 수 | 6개 |
| 노드 그룹 | 2개 (private: 3개, public: 3개) |
| 구매 옵션 | ON_DEMAND |

### 💻 m6i.xlarge 사양:
• **vCPU**: 4개
• **메모리**: 16 GiB  
• **네트워크**: 최대 12.5 Gbps
• **시간당 비용**: $0.3008 USD
• **총 월 비용**: 약 $1,299 USD (6노드)

### 🏗️ 노드 그룹 구성:
1. managed-ng-private-01: 3개 노드 (백엔드 워크로드용)
2. managed-ng-public-01: 3개 노드 (프론트엔드 워크로드용)

### 💡 최적화 권장사항:
1. Spot 인스턴스 활용으로 최대 70% 비용 절감
2. 워크로드별 인스턴스 타입 다양화 (t3.large, c6i.xlarge, r6i.large 등)
3. Savings Plans 또는 Reserved Instances 고려

상세한 분석과 최적화 방안은 ~/output/eks_worker_node_instance_types.md 파일에서 확인하실 수 있습니다.
                                                                                  
                                      
```

[Markdown 결과 예시](https://www.notion.so/whchoi98/eks_worker_node_instance_types-24804ef7e60e800ab009d57660fc1917?source=copy_link)
