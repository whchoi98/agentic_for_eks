---
description: 'Update : 2025.08.07'
---

# 8. EKS í™œìš© ì‚¬ë¡€ 2 (ë°°í¬)

## 0. ì‚¬ì „ ì„¤ì •

Deploymentì— ëŒ€í•œ í™œìš©ì‚¬ë¡€ë¥¼ ì‹¤ìŠµí•˜ê¸° ìœ„í•´, Sample Applicationì„ ì‚¬ì „ ë°°í¬í•©ë‹ˆë‹¤.

```
cd ~/environment/
#Sample Application ì„ Clone í•˜ê³ , ì‹¤í–‰í•©ë‹ˆë‹¤.
git clone https://github.com/aws-samples/eks-workshop-v2.git
kubectl apply -k ~/environment/eks-workshop-v2/manifests/base-application

```

Sample Applicationì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ì§€ í™•ì¸í•©ë‹ˆë‹¤.

```
kubectl get namespaces -l app.kubernetes.io/created-by=eks-workshop
kubectl get deployment -l app.kubernetes.io/created-by=eks-workshop -A

```

&#x20;30\~40ì´ˆ í›„ì— ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
$ kubectl get deployment -l app.kubernetes.io/created-by=eks-workshop -A
NAMESPACE   NAME             READY   UP-TO-DATE   AVAILABLE   AGE
carts       carts            1/1     1            1           36s
carts       carts-dynamodb   1/1     1            1           36s
catalog     catalog          1/1     1            1           36s
checkout    checkout         1/1     1            1           36s
checkout    checkout-redis   1/1     1            1           36s
orders      orders           1/1     1            1           36s
ui          ui               1/1     1            1           36s
```

## 1. EKS ê´€ë¦¬ë¥¼ ìœ„í•œ Cusotm Agentì™€ Context ì„¤ì •

1.1 Custom Agent ì„¤ì •

EKS Agedd

1.1 ì»¨í…ìŠ¤íŠ¸ íŒŒì¼ ìƒì„± (eks-deployer.md)

```
cat <<EOF > eks-deployer.md
ì‚¬ìš©ìê°€ â€œapplicationâ€ ë˜ëŠ” â€œappâ€ì´ë¼ê³  ì–¸ê¸‰í•  ê²½ìš°, ì´ëŠ” ~/environment/eks-workshop-v2/manifests/base-application ê²½ë¡œì— ìœ„ì¹˜í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ëª¨ë“  ë³€ê²½ ì‚¬í•­ì€ ì—…ë°ì´íŠ¸ë¥¼ ì ìš©í•˜ê¸° ì „ì— YAML íŒŒì¼ì—ì„œ ìˆ˜ì •ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
ì—…ë°ì´íŠ¸ë¥¼ ì ìš©í•  ë•ŒëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìµœìƒìœ„ ë””ë ‰í„°ë¦¬ì—ì„œ kustomize í”Œë˜ê·¸ -f ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
ì• í”Œë¦¬ì¼€ì´ì…˜ í† í´ë¡œì§€ ë‹¤ì´ì–´ê·¸ë¨ì„ ìƒì„±í•  ë•ŒëŠ” Markdown(.md) íŒŒì¼ë¡œ ì‘ì„±í•˜ë©°, ì•„ë˜ì™€ ê°™ì€ MkDocsìš© mermaid ì½”ë“œ ìŠ¤ë‹ˆí«ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:
\`\`\`mermaid
graph LR
A[Start] --> B{Error?};
B -->|Yes| C[Hmm...];
C --> D[Debug];
D --> B;
B ---->|No| E[Yay!];
\`\`\`
EOF
```

ì´ íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì€ í–‰ë™ ê·œì¹™ì„ Amazon Qì—ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤:

* â€œapplicationâ€ì€ `~/environment/eks-workshop-v2/manifests/base-application` ê²½ë¡œì˜ ì•±ì„ ì˜ë¯¸í•¨
* ì—…ë°ì´íŠ¸ ì „ YAML íŒŒì¼ì„ ìˆ˜ì •í•´ì•¼ í•¨
* kustomize í”Œë˜ê·¸ `-f` ë¥¼ ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ì— ì‚¬ìš©
* ë‹¤ì´ì–´ê·¸ë¨ì€ `.md` íŒŒì¼ë¡œ, `Mermaid` í˜•ì‹ìœ¼ë¡œ ì‘ì„±

### 1.2. Amazon Q CLI ì„¸ì…˜ ì‹œì‘

```
q chat --trust-all-tools
```

### 1.3. ì»¨í…ìŠ¤íŠ¸ í”„ë¡œíŒŒì¼ ìƒì„±

```
/profile create eks-deployer
```

### 1.4 ì»¨í…ìŠ¤íŠ¸ íŒŒì¼ ì¶”ê°€

```
/context add eks-deployer.md
```

### 1.5 í˜„ì¬ ì ìš©ëœ ì»¨í…ìŠ¤íŠ¸ í™•ì¸

```
/context show
```

ì‹¤í–‰ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:

```
[eks-deployer] !> /context show

ğŸŒ global:
    .amazonq/rules/**/*.md (2 matches)
    README.md 
    AmazonQ.md 

ğŸ‘¤ profile (eks-deployer):
    eks-deployer.md (1 match)

3 matched files in use:
ğŸŒ /home/ec2-user/.amazonq/rules/markdown.md (~90 tkns)
ğŸŒ /home/ec2-user/.amazonq/rules/aws.md (~70 tkns)
ğŸ‘¤ /home/ec2-user/eks-deployer.md (~250 tkns)

Total: ~410 tokens
```

ğŸ’¡ ì¶œë ¥ ê²°ê³¼ì— eks-deployer.mdê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ì»¨í…ìŠ¤íŠ¸ ì„¤ì •ì´ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œëœ ê²ƒì…ë‹ˆë‹¤.

***

## 2. ì• í”Œë¦¬ì¼€ì´ì…˜ ê²€í†  (Review Application)

### 2.1 ì–´í”Œë¦¬ì¼€ì´ì…˜ ë¦¬ë·° (Review Application)

í”„ë¡¬í”„íŠ¸:

```
~/environment/eks-workshop-v2/manifests/base-application ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¤ëª…í•´ì¤˜.
```

ì„¤ëª…:

ì§€ì •ëœ ê²½ë¡œì— ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì–´ë–¤ êµ¬ì„±ìœ¼ë¡œ ë˜ì–´ ìˆëŠ”ì§€, ì–´ë–¤ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ë‚˜ë‰˜ëŠ”ì§€ì— ëŒ€í•´ ìš”ì•½ ì„¤ëª…ì„ ìš”ì²­í•©ë‹ˆë‹¤.

ì‹¤í–‰ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:

```
## EKS Workshop ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ëª…

~/environment/eks-workshop-v2/manifests/base-application ê²½ë¡œì— ìœ„ì¹˜í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì†Œë§¤ ìŠ¤í† ì–´ ìƒ˜í”Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. 
ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ EKS(Elastic Kubernetes Service) ì›Œí¬ìˆì—ì„œ ë‹¤ì–‘í•œ Kubernetes ê¸°ëŠ¥ê³¼ AWS ì„œë¹„ìŠ¤ í†µí•©ì„ ì‹œì—°í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

### ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„± ìš”ì†Œ

1. UI ì„œë¹„ìŠ¤
   â€¢ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” Java/Spring Boot ê¸°ë°˜ ì›¹ ì„œë¹„ìŠ¤
   â€¢ ëª¨ë“  ë°±ì—”ë“œ ì„œë¹„ìŠ¤ì™€ í†µì‹ 
   â€¢ Prometheus ëª¨ë‹ˆí„°ë§ì„ ìœ„í•œ ë©”íŠ¸ë¦­ ë…¸ì¶œ
   â€¢ ë©”ëª¨ë¦¬ ì œí•œ: 1.5Gi, CPU ìš”ì²­: 250m

2. Catalog ì„œë¹„ìŠ¤
   â€¢ ì œí’ˆ ì •ë³´ì™€ ì¬ê³ ë¥¼ ê´€ë¦¬
   â€¢ ì „ìš© ë°ì´í„°ë² ì´ìŠ¤ì— ë°ì´í„° ì €ì¥
   â€¢ ì œí’ˆ ê²€ìƒ‰ ë° ë¸Œë¼ìš°ì§• ê¸°ëŠ¥ ì œê³µ
   â€¢ ë©”ëª¨ë¦¬ ì œí•œ: 512Mi, CPU ìš”ì²­: 250m

3. Carts ì„œë¹„ìŠ¤
   â€¢ ê³ ê° ì¥ë°”êµ¬ë‹ˆ ê´€ë¦¬
   â€¢ DynamoDB í”„ë¡œí•„ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ì €ì¥
   â€¢ ì¥ë°”êµ¬ë‹ˆ ì¡°ì‘ ê¸°ëŠ¥(í•­ëª© ì¶”ê°€/ì œê±°) ì œê³µ
   â€¢ ë©”ëª¨ë¦¬ ì œí•œ: 1Gi, CPU ìš”ì²­: 250m

4. Checkout ì„œë¹„ìŠ¤
   â€¢ ê²°ì œ í”„ë¡œì„¸ìŠ¤ ì²˜ë¦¬
   â€¢ Carts, Orders ì„œë¹„ìŠ¤ ë° RabbitMQì™€ í†µì‹ 
   â€¢ ê²°ì œ ì •ë³´ ì²˜ë¦¬
   â€¢ ë©”ëª¨ë¦¬ ì œí•œ: 512Mi, CPU ìš”ì²­: 250m

5. Orders ì„œë¹„ìŠ¤
   â€¢ ê³ ê° ì£¼ë¬¸ ê´€ë¦¬
   â€¢ ì½ê¸°/ì“°ê¸° ë¶„ë¦¬ëœ ì „ìš© ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©
   â€¢ ì£¼ë¬¸ ìƒíƒœ ì—…ë°ì´íŠ¸ ì²˜ë¦¬
   â€¢ ë©”ëª¨ë¦¬ ì œí•œ: 1Gi, CPU ìš”ì²­: 250m

6. Assets ì„œë¹„ìŠ¤
   â€¢ UIë¥¼ ìœ„í•œ ì •ì  ìì‚° ì œê³µ
   â€¢ ì´ë¯¸ì§€ ë° ê¸°íƒ€ ë¯¸ë””ì–´ íŒŒì¼ ì„œë¹„ìŠ¤

7. RabbitMQ
   â€¢ ì„œë¹„ìŠ¤ ê°„ ë¹„ë™ê¸° í†µì‹ ì„ ìœ„í•œ ë©”ì‹œì§€ ë¸Œë¡œì»¤
   â€¢ ì´ë²¤íŠ¸ ê¸°ë°˜ í”„ë¡œì„¸ìŠ¤ì— ì‚¬ìš©

8. ê¸°íƒ€ ì§€ì› êµ¬ì„± ìš”ì†Œ

### ê¸°ìˆ ì  íŠ¹ì§•

â€¢ **ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€**: ëª¨ë“  ì„œë¹„ìŠ¤ëŠ” public.ecr.awsì—ì„œ í˜¸ìŠ¤íŒ…ë˜ëŠ” ì´ë¯¸ì§€ ì‚¬ìš©
â€¢ **ë¦¬ì†ŒìŠ¤ ê´€ë¦¬**: ê° ì„œë¹„ìŠ¤ëŠ” ì •ì˜ëœ ë¦¬ì†ŒìŠ¤ ìš”ì²­ ë° ì œí•œ ë³´ìœ 
â€¢ **ë³´ì•ˆ ê¸°ëŠ¥**:
  â€¢ ë¹„ë£¨íŠ¸ ì‚¬ìš©ìë¡œ ì‹¤í–‰ (UID 1000)
  â€¢ ì½ê¸° ì „ìš© ë£¨íŠ¸ íŒŒì¼ì‹œìŠ¤í…œ
  â€¢ ë¶ˆí•„ìš”í•œ ê¶Œí•œ ì œê±°
  â€¢ ì•ˆì „í•œ ë³¼ë¥¨ ë§ˆìš´íŠ¸
â€¢ **ëª¨ë‹ˆí„°ë§**: Prometheus ë©”íŠ¸ë¦­ ìˆ˜ì§‘ì„ ìœ„í•œ ì–´ë…¸í…Œì´ì…˜
â€¢ **ìƒíƒœ í™•ì¸**: ì•ˆì •ì„±ì„ ìœ„í•œ liveness ë° readiness í”„ë¡œë¸Œ
â€¢ **êµ¬ì„± ê´€ë¦¬**: ì„œë¹„ìŠ¤ êµ¬ì„±ì„ ìœ„í•œ ConfigMap
â€¢ **ë¹„ë°€ ê´€ë¦¬**: ë¯¼ê°í•œ ë°ì´í„°ëŠ” Kubernetes ì‹œí¬ë¦¿ì— ì €ì¥

### ë°°í¬ êµ¬ì¡°

ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ Kustomizeë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°í¬ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. ë©”ì¸ kustomization.yaml íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì€ ëª¨ë“  êµ¬ì„± ìš”ì†Œë¥¼ í¬í•¨í•©ë‹ˆë‹¤:

yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - rabbitmq
  - catalog
  - carts
  - checkout
  - assets
  - orders
  - ui
  - other


ê° êµ¬ì„± ìš”ì†Œ ë””ë ‰í† ë¦¬ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ Kubernetes ë§¤ë‹ˆí˜ìŠ¤íŠ¸ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:
â€¢ ë°°í¬(Deployment) êµ¬ì„±
â€¢ ì„œë¹„ìŠ¤(Service) ì •ì˜
â€¢ êµ¬ì„±ë§µ(ConfigMap)
â€¢ ë„¤ì„ìŠ¤í˜ì´ìŠ¤(Namespace) ì„ ì–¸
â€¢ ì„œë¹„ìŠ¤ ê³„ì •(ServiceAccount)

### ì• í”Œë¦¬ì¼€ì´ì…˜ íë¦„

1. ì‚¬ìš©ìëŠ” UI ì„œë¹„ìŠ¤ì™€ ìƒí˜¸ ì‘ìš©
2. UIëŠ” ë°±ì—”ë“œ ì„œë¹„ìŠ¤(Catalog, Carts ë“±)ì™€ í†µì‹ 
3. ê²°ì œ ì‹œ:
   â€¢ Checkout ì„œë¹„ìŠ¤ëŠ” Carts ì„œë¹„ìŠ¤ë¡œ ì¥ë°”êµ¬ë‹ˆ ìœ íš¨ì„± ê²€ì‚¬
   â€¢ Orders ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ì£¼ë¬¸ ìƒì„±
   â€¢ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•´ RabbitMQë¥¼ í†µí•´ ë©”ì‹œì§€ ì „ì†¡
4. ê° ì„œë¹„ìŠ¤ëŠ” ë°ì´í„° ì§€ì†ì„±ì„ ìœ„í•´ ìì²´ ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ ì‘ìš©

### ë°°í¬ ë° ì—…ë°ì´íŠ¸

ì›Œí¬ìˆ ê°€ì´ë“œë¼ì¸ì— ë”°ë¥´ë©´:
â€¢ ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ ë³€ê²½ì€ ì—…ë°ì´íŠ¸ë¥¼ ì ìš©í•˜ê¸° ì „ì— YAML íŒŒì¼ì—ì„œ ìˆ˜ì •í•´ì•¼ í•¨
â€¢ ì—…ë°ì´íŠ¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìµœìƒìœ„ ë””ë ‰í† ë¦¬ì—ì„œ kustomize í”Œë˜ê·¸ -fë¥¼ ì‚¬ìš©í•˜ì—¬ ì ìš©í•´ì•¼ í•¨
â€¢ ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë‹¤ì–‘í•œ Kubernetes ê¸°ëŠ¥ê³¼ AWS ì„œë¹„ìŠ¤ í†µí•©ì„ ì‹œì—°í•˜ê¸° ìœ„í•´ ì„¤ê³„ë¨

ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì˜ ìš°ìˆ˜í•œ ì˜ˆì‹œì´ë©°, Kubernetes ê°œë…ê³¼ AWS ì„œë¹„ìŠ¤ í†µí•©ì„ í•™ìŠµí•˜ê¸° ìœ„í•œ ì‹¤ìš©ì ì¸ í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤.
```

### 2.2 ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ (Deploy Application)

í”„ë¡¬í”„íŠ¸:

```
~/environment/eks-workshop-v2/manifests/base-application ì— ìˆëŠ” Applicationì„ ë°°í¬í•´ì¤˜.
kustomize option in kubectl ì˜ kustomize optionì„ ì‚¬ìš©í•´ì¤˜.
```

ì„¤ëª…:

kubectl apply -k ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ base-applicationì„ í´ëŸ¬ìŠ¤í„°ì— ë°°í¬í•©ë‹ˆë‹¤.

Q CLIëŠ” kustomizeë¥¼ ì´ìš©í•œ ë°°í¬ë¥¼ ìë™ ì‹¤í–‰í•©ë‹ˆë‹¤.

ì‹¤í–‰ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:

```
ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ë°°í¬ë˜ì—ˆìŠµë‹ˆë‹¤! kubectlì˜ kustomize ì˜µì…˜(-k)ì„ ì‚¬ìš©í•˜ì—¬ ~/environment/eks-workshop-v2/manifests/base-application ê²½ë¡œì— ìˆëŠ” ì• í”Œë¦¬ì¼€ì´
ì…˜ì„ ë°°í¬í–ˆìŠµë‹ˆë‹¤.

### ë°°í¬ ê²°ê³¼ ìš”ì•½

1. ë°°í¬ ëª…ë ¹ ì‹¤í–‰:
  bash
   cd ~/environment/eks-workshop-v2/manifests/base-application && kubectl apply -k .
   

2. ë°°í¬ëœ êµ¬ì„± ìš”ì†Œ:
   â€¢ 8ê°œì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ (assets, carts, catalog, checkout, orders, other, rabbitmq, ui)
   â€¢ ê° ì„œë¹„ìŠ¤ë³„ ServiceAccount
   â€¢ ConfigMap, Secret ë“±ì˜ êµ¬ì„± ë¦¬ì†ŒìŠ¤
   â€¢ ê° ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ Deployment ë° Service
   â€¢ StatefulSet (catalog-mysql, rabbitmq)

3. í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ Pod ìƒíƒœ:
   â€¢ **UI**: ui-8564fc5cfb-gfsdr (Running)
   â€¢ **Carts**: 
     â€¢ carts-7c95cd549d-4mjjb (Running)
     â€¢ carts-dynamodb-68bd8f6f6d-hr5jc (Running)
   â€¢ **Catalog**: 
     â€¢ catalog-6d48d97dff-l6z96 (Running)
     â€¢ catalog-mysql-0 (Running)
   â€¢ **Checkout**: 
     â€¢ checkout-7ff8988c8c-hrqtr (Running)
     â€¢ checkout-redis-7fb554999b-mpr29 (Running)
   â€¢ **Orders**: 
     â€¢ orders-79bc47b54d-vm9jr (Running)
     â€¢ orders-mysql-65bd8b5787-s6q65 (Running)
   â€¢ **RabbitMQ**: rabbitmq-0 (Running)

4. UI ì„œë¹„ìŠ¤ ì •ë³´:
   â€¢ íƒ€ì…: ClusterIP
   â€¢ IP: 172.20.211.207
   â€¢ í¬íŠ¸: 80 (HTTP)

ëª¨ë“  êµ¬ì„± ìš”ì†Œê°€ ì •ìƒì ìœ¼ë¡œ ë°°í¬ë˜ì—ˆìœ¼ë©°, ê° ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ í•´ë‹¹ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í”„ë¡ íŠ¸ì—”ë“œ(UI)ëŠ” ClusterIP ì„œë¹„ìŠ¤ë¡œ ë…¸ì¶œë˜ì–´ ìˆ
ìœ¼ë©°, í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```

***

### 2.3 ì• í”Œë¦¬ì¼€ì´ì…˜ ì¤€ë¹„ ìƒíƒœ í™•ì¸ (Application Readiness)

í”„ë¡¬í”„íŠ¸:

```
ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì†í•œ ëª¨ë“  íŒŒë“œê°€ ì¤€ë¹„(Ready) ìƒíƒœê°€ ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
```

ì„¤ëª…:

ë°°í¬ëœ íŒŒë“œë“¤ì´ ëª¨ë‘ Ready ìƒíƒœê°€ ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤. Q CLIê°€ ìƒíƒœë¥¼ ì¶”ì í•´ ì•Œë ¤ì¤ë‹ˆë‹¤.

ì‹¤í–‰ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:

```
ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒë“œê°€ Ready ìƒíƒœê°€ ë˜ì—ˆìŠµë‹ˆë‹¤! ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ íŒŒë“œ ìƒíƒœë¥¼ í™•ì¸í•œ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

### ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒë“œ ìƒíƒœ ìš”ì•½

| ë„¤ì„ìŠ¤í˜ì´ìŠ¤ | íŒŒë“œ ì´ë¦„ | ìƒíƒœ | Ready |
|------------|---------|------|-------|
| assets | assets-69974886bf-b69d4 | Running | 1/1 âœ… |
| carts | carts-7c95cd549d-4mjjb | Running | 1/1 âœ… |
| carts | carts-dynamodb-68bd8f6f6d-hr5jc | Running | 1/1 âœ… |
| catalog | catalog-6d48d97dff-l6z96 | Running | 1/1 âœ… |
| catalog | catalog-mysql-0 | Running | 1/1 âœ… |
| checkout | checkout-7ff8988c8c-hrqtr | Running | 1/1 âœ… |
| checkout | checkout-redis-7fb554999b-mpr29 | Running | 1/1 âœ… |
| orders | orders-79bc47b54d-vm9jr | Running | 1/1 âœ… |
| orders | orders-mysql-65bd8b5787-s6q65 | Running | 1/1 âœ… |
| rabbitmq | rabbitmq-0 | Running | 1/1 âœ… |
| ui | ui-8564fc5cfb-gfsdr | Running | 1/1 âœ… |

ëª¨ë“  ì»¨í…Œì´ë„ˆê°€ Ready ìƒíƒœë¡œ í™•ì¸ë˜ì—ˆìœ¼ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  êµ¬ì„± ìš”ì†Œê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤. ì¼ë¶€ íŒŒë“œ(catalog, orders)ì—ì„œ ì´ì „ì— ì¬ì‹œì‘ì´ ìˆì—ˆì§€ë§Œ, í˜„
ì¬ëŠ” ëª¨ë‘ ì•ˆì •ì ìœ¼ë¡œ ì‹¤í–‰ë˜ê³  ìˆìŠµë‹ˆë‹¤.

ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì™„ì „íˆ ë°°í¬ë˜ì–´ ì‚¬ìš©í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.

```

### 2.4 ì• í”Œë¦¬ì¼€ì´ì…˜ ì—…ë°ì´íŠ¸ (Update the Application)

í”„ë¡¬í”„íŠ¸:

```
checkout ë””í”Œë¡œì´ë¨¼íŠ¸ë¥¼ 3ê°œì˜ ë ˆí”Œë¦¬ì¹´ë¡œ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.
ì ìš©í•˜ê¸° ì „ì— ë°˜ë“œì‹œ YAML íŒŒì¼ì„ ë¨¼ì € ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.
```

ì„¤ëª…:

checkout ë””í”Œë¡œì´ë¨¼íŠ¸ì˜ ë³µì œ ìˆ˜(replicas)ë¥¼ 3ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.

YAML íŒŒì¼ ìˆ˜ì • â†’ ì ìš©(kustomize) ìˆœìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.

ì‹¤í–‰ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:

```
ì„±ê³µì ìœ¼ë¡œ checkout ë””í”Œë¡œì´ë¨¼íŠ¸ë¥¼ 3ê°œì˜ ë ˆí”Œë¦¬ì¹´ë¡œ ì—…ë°ì´íŠ¸í–ˆìŠµë‹ˆë‹¤!

### ì‘ì—… ê³¼ì • ìš”ì•½:

1. YAML íŒŒì¼ ìˆ˜ì •:
   â€¢ sed ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ~/environment/eks-workshop-v2/manifests/base-application/checkout/deployment.yaml íŒŒì¼ì˜ replicas ê°’ì„ 1ì—ì„œ 3ìœ¼ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
  bash
   sed -i 's/replicas: 1/replicas: 3/' ~/environment/eks-workshop-v2/manifests/base-application/checkout/deployment.yaml
   

2. ë³€ê²½ ì‚¬í•­ í™•ì¸:
   â€¢ íŒŒì¼ì„ ì½ì–´ì„œ replicas ê°’ì´ 3ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆëŠ”ì§€ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

3. ë³€ê²½ ì‚¬í•­ ì ìš©:
   â€¢ kustomize ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë³€ê²½ ì‚¬í•­ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.
  bash
   cd ~/environment/eks-workshop-v2/manifests/base-application && kubectl apply -k .
   

4. ê²°ê³¼ í™•ì¸:
   â€¢ checkout ë””í”Œë¡œì´ë¨¼íŠ¸ê°€ 3/3 Ready ìƒíƒœë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.
   â€¢ 3ê°œì˜ checkout íŒŒë“œê°€ ëª¨ë‘ Running ìƒíƒœì…ë‹ˆë‹¤:
     â€¢ checkout-7ff8988c8c-9jrzd
     â€¢ checkout-7ff8988c8c-hrqtr (ê¸°ì¡´ íŒŒë“œ)
     â€¢ checkout-7ff8988c8c-mhxg2

ì´ì œ checkout ì„œë¹„ìŠ¤ëŠ” 3ê°œì˜ ë ˆí”Œë¦¬ì¹´ë¡œ ì‹¤í–‰ë˜ê³  ìˆì–´ ê°€ìš©ì„±ê³¼ í™•ì¥ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤. ëª¨ë“  íŒŒë“œê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ ì¤‘ì´ë©°, ë””í”Œë¡œì´ë¨¼íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜
ì—ˆìŠµë‹ˆë‹¤.
```

***

## 3. í† í´ë¡œì§€ ì‹œê°í™” (Topology Diagram)

í”„ë¡¬í”„íŠ¸:

```
í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í† í´ë¡œì§€ ë‹¤ì´ì–´ê·¸ë¨ì„ ìƒì„±í•´ ì£¼ì„¸ìš”.
```

ì„¤ëª…:

í˜„ì¬ í´ëŸ¬ìŠ¤í„°ì— ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„œë¹„ìŠ¤ ê°„ êµ¬ì¡°ë¥¼ mermaid ê¸°ë°˜ ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.

MkDocs ë˜ëŠ” GitBookì—ì„œ ì‹œê°í™” ê°€ëŠ¥í•œ Markdown ì½”ë“œë¡œ ì¶œë ¥ë©ë‹ˆë‹¤.

````
í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í† í´ë¡œì§€ ë‹¤ì´ì–´ê·¸ë¨ì„ ìƒì„±í•˜ê² ìŠµë‹ˆë‹¤.


ğŸ› ï¸  Using tool: fs_write (trusted)
 â‹® 
 â— Path: ../../tmp/app-topology.md

-  1    : ## EKS Workshop ì• í”Œë¦¬ì¼€ì´ì…˜ í† í´ë¡œì§€
+      1: ## EKS Workshop ì• í”Œë¦¬ì¼€ì´ì…˜ í† í´ë¡œì§€ ë‹¤ì´ì–´ê·¸ë¨
   2,  2: 
-  3    : ì´ ë¬¸ì„œëŠ” EKS Workshopì—ì„œ ì‚¬ìš©ë˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê¸°ë°˜ ì†Œë§¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì¡°ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.
+      3: ì´ ë‹¤ì´ì–´ê·¸ë¨ì€ í˜„ì¬ EKS í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê¸°ë°˜ ì†Œë§¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì¡°ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
   4,  4: 
   5,  5: ```mermaid
   6,  6: graph TD
   7,  7:     UI[UI ì„œë¹„ìŠ¤] --> Catalog[Catalog ì„œë¹„ìŠ¤]
   8,  8:     UI --> Carts[Carts ì„œë¹„ìŠ¤]
   9,  9:     UI --> Checkout[Checkout ì„œë¹„ìŠ¤]
  10, 10:     UI --> Orders[Orders ì„œë¹„ìŠ¤]
  11, 11:     
  12, 12:     Checkout --> Orders
  13, 13:     Checkout --> Carts
  14, 14:     Checkout --> RabbitMQ[RabbitMQ]
  15, 15:     
- 16    :     Carts --> CartsDB[(Carts DB)]
- 17    :     Catalog --> CatalogDB[(Catalog DB)]
- 18    :     Orders --> OrdersDB[(Orders DB)]
+     16:     Carts --> CartsDB[(Carts DynamoDB)]
+     17:     Catalog --> CatalogDB[(Catalog MySQL)]
+     18:     Orders --> OrdersDB[(Orders MySQL)]
+     19:     Checkout --> CheckoutRedis[(Checkout Redis)]
  19, 20:     
  20, 21:     Assets[Assets ì„œë¹„ìŠ¤] --> UI
  21, 22:     
  22, 23:     subgraph í”„ë¡ íŠ¸ì—”ë“œ
  23, 24:         UI
  24, 25:         Assets
  25, 26:     end
  26, 27:     
  27, 28:     subgraph ë°±ì—”ë“œ ì„œë¹„ìŠ¤
  28, 29:         Catalog
  29, 30:         Carts
- 30    :         Checkout
+     31:         Checkout["Checkout (3 replicas)"]
  31, 32:         Orders
  32, 33:     end
  33, 34:     
  34, 35:     subgraph ë°ì´í„° ì €ì¥ì†Œ
  35, 36:         CartsDB
  36, 37:         CatalogDB
  37, 38:         OrdersDB
+     39:         CheckoutRedis
  38, 40:         RabbitMQ
  39, 41:     end
+     42:     
+     43:     classDef frontend fill:#f9f,stroke:#333,stroke-width:2px;
+     44:     classDef backend fill:#bbf,stroke:#333,stroke-width:2px;
+     45:     classDef database fill:#bfb,stroke:#333,stroke-width:2px;
+     46:     
+     47:     class UI,Assets frontend;
+     48:     class Catalog,Carts,Checkout,Orders backend;
+     49:     class CartsDB,CatalogDB,OrdersDB,CheckoutRedis,RabbitMQ database;
+     50: ```

Replacing: ../../tmp/app-topology.md

 â‹® 
 â— Completed in 0.0s



ğŸ› ï¸  Using tool: execute_bash (trusted)
 â‹® 
 â— I will run the following shell command: 
glow /tmp/app-topology.md


  ## EKS Workshop ì• í”Œë¦¬ì¼€ì´ì…˜ í† í´ë¡œì§€ ë‹¤ì´ì–´ê·¸ë¨                                
                                                                                  
  ì´ ë‹¤ì´ì–´ê·¸ë¨ì€ í˜„ì¬ EKS í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê¸°ë°˜ ì†Œë§¤        
  ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì¡°ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.                                               
                                                                                  
    graph TD                                                                      
        UI[UI ì„œë¹„ìŠ¤] --> Catalog[Catalog ì„œë¹„ìŠ¤]                                 
        UI --> Carts[Carts ì„œë¹„ìŠ¤]                                                
        UI --> Checkout[Checkout ì„œë¹„ìŠ¤]                                          
        UI --> Orders[Orders ì„œë¹„ìŠ¤]                                              
                                                                                  
        Checkout --> Orders                                                       
        Checkout --> Carts                                                        
        Checkout --> RabbitMQ[RabbitMQ]                                           
                                                                                  
        Carts --> CartsDB[(Carts DynamoDB)]                                       
        Catalog --> CatalogDB[(Catalog MySQL)]                                    
        Orders --> OrdersDB[(Orders MySQL)]                                       
        Checkout --> CheckoutRedis[(Checkout Redis)]                              
                                                                                  
        Assets[Assets ì„œë¹„ìŠ¤] --> UI                                              
                                                                                  
        subgraph í”„ë¡ íŠ¸ì—”ë“œ                                                       
            UI                                                                    
            Assets                                                                
        end                                                                       
                                                                                  
        subgraph ë°±ì—”ë“œ ì„œë¹„ìŠ¤                                                    
            Catalog                                                               
            Carts                                                                 
            Checkout["Checkout (3 replicas)"]                                     
            Orders                                                                
        end                                                                       
                                                                                  
        subgraph ë°ì´í„° ì €ì¥ì†Œ                                                    
            CartsDB                                                               
            CatalogDB                                                             
            OrdersDB                                                              
            CheckoutRedis                                                         
            RabbitMQ                                                              
        end                                                                       
                                                                                  
        classDef frontend fill:#f9f,stroke:#333,stroke-width:2px;                 
        classDef backend fill:#bbf,stroke:#333,stroke-width:2px;                  
        classDef database fill:#bfb,stroke:#333,stroke-width:2px;                 
                                                                                  
        class UI,Assets frontend;                                                 
        class Catalog,Carts,Checkout,Orders backend;                              
        class CartsDB,CatalogDB,OrdersDB,CheckoutRedis,RabbitMQ database;         


 â‹® 
 â— Completed in 0.16s


## EKS Workshop ì• í”Œë¦¬ì¼€ì´ì…˜ í† í´ë¡œì§€ ë‹¤ì´ì–´ê·¸ë¨

ì´ ë‹¤ì´ì–´ê·¸ë¨ì€ í˜„ì¬ EKS í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê¸°ë°˜ ì†Œë§¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì¡°ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë‹¤ìŒê³¼ ê°™ì€ ì£¼ìš” êµ¬ì„± ìš”ì†Œë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤:

### í”„ë¡ íŠ¸ì—”ë“œ ì„œë¹„ìŠ¤
â€¢ **UI ì„œë¹„ìŠ¤**: ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ë©”ì¸ í”„ë¡ íŠ¸ì—”ë“œ ì„œë¹„ìŠ¤
â€¢ **Assets ì„œë¹„ìŠ¤**: UIì— í•„ìš”í•œ ì •ì  ìì‚°ì„ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤

### ë°±ì—”ë“œ ì„œë¹„ìŠ¤
â€¢ **Catalog ì„œë¹„ìŠ¤**: ì œí’ˆ ì¹´íƒˆë¡œê·¸ ì •ë³´ë¥¼ ê´€ë¦¬
â€¢ **Carts ì„œë¹„ìŠ¤**: ì‚¬ìš©ì ì¥ë°”êµ¬ë‹ˆë¥¼ ê´€ë¦¬
â€¢ **Checkout ì„œë¹„ìŠ¤**: ê²°ì œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì²˜ë¦¬ (í˜„ì¬ 3ê°œì˜ ë ˆí”Œë¦¬ì¹´ë¡œ ì‹¤í–‰ ì¤‘)
â€¢ **Orders ì„œë¹„ìŠ¤**: ì£¼ë¬¸ ì²˜ë¦¬ ë° ê´€ë¦¬

### ë°ì´í„° ì €ì¥ì†Œ
â€¢ **Carts DynamoDB**: ì¥ë°”êµ¬ë‹ˆ ë°ì´í„° ì €ì¥
â€¢ **Catalog MySQL**: ì œí’ˆ ì¹´íƒˆë¡œê·¸ ë°ì´í„° ì €ì¥
â€¢ **Orders MySQL**: ì£¼ë¬¸ ë°ì´í„° ì €ì¥
â€¢ **Checkout Redis**: ì²´í¬ì•„ì›ƒ í”„ë¡œì„¸ìŠ¤ë¥¼ ìœ„í•œ ìºì‹± ë° ì„ì‹œ ë°ì´í„° ì €ì¥
â€¢ **RabbitMQ**: ì„œë¹„ìŠ¤ ê°„ ë¹„ë™ê¸° ë©”ì‹œì§€ ì „ë‹¬ì„ ìœ„í•œ ë©”ì‹œì§€ ë¸Œë¡œì»¤

### ì„œë¹„ìŠ¤ ê°„ í†µì‹  íë¦„
1. ì‚¬ìš©ìëŠ” UI ì„œë¹„ìŠ¤ì™€ ìƒí˜¸ì‘ìš©
2. UI ì„œë¹„ìŠ¤ëŠ” í•„ìš”ì— ë”°ë¼ Catalog, Carts, Checkout, Orders ì„œë¹„ìŠ¤ì™€ í†µì‹ 
3. Checkout ì„œë¹„ìŠ¤ëŠ” ì£¼ë¬¸ ì²˜ë¦¬ ê³¼ì •ì—ì„œ Orders, Carts ì„œë¹„ìŠ¤ ë° RabbitMQì™€ í†µì‹ 
4. ê° ì„œë¹„ìŠ¤ëŠ” ìì²´ ë°ì´í„°ë² ì´ìŠ¤ì™€ í†µì‹ í•˜ì—¬ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê²€ìƒ‰

ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì˜ ì¢‹ì€ ì˜ˆì‹œë¡œ, ê° ì„œë¹„ìŠ¤ê°€ ë…ë¦½ì ìœ¼ë¡œ ë°°í¬ë˜ê³  í™•ì¥ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ Checkout ì„œë¹„ìŠ¤ëŠ” 3ê°œì˜ ë ˆí”Œë¦¬ì¹´ë¡œ í™•ì¥ë˜ì–´ ë†’
ì€ ê°€ìš©ì„±ê³¼ ë¶€í•˜ ë¶„ì‚°ì„ ì œê³µí•©ë‹ˆë‹¤.
````

/tmp/app-topology.md íŒŒì¼ì„ [https://mermaid.live/](https://mermaid.live/) ì— ì½”ë“œë¥¼ ë¶™ì—¬ ë„£ìŠµë‹ˆë‹¤.

ì•„ë˜ì™€ ê°™ì€ í† í´ë¡œì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<figure><img src=".gitbook/assets/image (2).png" alt=""><figcaption></figcaption></figure>
